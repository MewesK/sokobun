!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n=i.p+"12c3d9fceaec0f8f5bad1537a060f00d.png",r=i.p+"64f4fa35cb4cf5b04ef6b200160e740a.png";function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a=function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"src",void 0),o(this,"image",void 0),this.src=e,this.image=i};function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"cache",void 0),s(this,"load",(function(t){return new Promise((function(i){var n=t.length;t.forEach((function(t){var r=new Image;r.addEventListener("load",(function(){0==--n&&(console.log("Resources finished loading..."),i())}),!1),r.src=t,e.cache.push(new a(t,r))}))}))})),s(this,"get",(function(t){var i=e.cache.find((function(e){return e.src===t}));if(void 0===i)throw new Error;return i})),this.cache=[]};function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var h=function t(e,i,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"resource",void 0),u(this,"x",void 0),u(this,"y",void 0),u(this,"width",void 0),u(this,"height",void 0),this.resource=e,this.x=i,this.y=n,this.width=r,this.height=o};function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var f=function t(e,i,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,"tileTable",void 0),l(this,"get",(function(t,e){return r.tileTable[t][e]}));var o=e.image.width/n,a=e.image.height/i;this.tileTable=[];for(var s=0;s<i;s++){this.tileTable[s]=[];for(var c=0;c<n;c++)this.tileTable[s][c]=new h(e,c*o,s*a,o,a)}};function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var p=function t(e){var i=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"actionList",void 0),d(this,"x",void 0),d(this,"y",void 0),d(this,"action",void 0),d(this,"direction",void 0),d(this,"timer",void 0),d(this,"setAction",(function(t){if(void 0===i.actionList[t])throw new Error("Invalid direction");i.timer=0,i.action=t})),d(this,"setDirection",(function(t){if(void 0===i.actionList[i.action].directionList[t])throw new Error("Invalid direction");i.timer=0,i.direction=t})),d(this,"update",(function(t){i.timer+=t,i.timer>=i.actionList[i.action].duration&&(i.timer=0)})),d(this,"getTile",(function(){var t=i.actionList[i.action],e=t.directionList[i.direction];return e[Math.floor(i.timer/(t.duration/e.length))]})),0===Object.keys(e).length)throw new Error("There must be at least one action.");this.actionList=e,this.x=0,this.y=0,this.action=Object.keys(this.actionList)[0],this.direction=Object.keys(this.actionList[this.action].directionList)[0],this.timer=0};function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var v=function t(e,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,"directionList",void 0),g(this,"duration",void 0),0===Object.keys(e).length)throw new Error("There must be at least one action.");this.directionList=e,this.duration=i};function b(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var w=document.createElement("canvas");new function t(e,i,o){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,"resourceLoader",void 0),b(this,"canvas",void 0),b(this,"context",void 0),b(this,"spriteMap",void 0),b(this,"tileMap",void 0),b(this,"lastTime",0),b(this,"gameTime",0),b(this,"bunnie",void 0),b(this,"loop",(function(){var t=Date.now(),e=(t-a.lastTime)/1e3;a.gameTime+=e,a.context.clearRect(0,0,a.canvas.width,a.canvas.height);var i=a.bunnie.getTile();a.context.drawImage(i.resource.image,i.x,i.y,i.width,i.height,a.bunnie.x,a.bunnie.y,2*i.width,2*i.height),"right"===a.bunnie.direction?(a.bunnie.x+=2,a.bunnie.x+2*i.width>=a.canvas.width&&a.bunnie.setDirection("left")):(a.bunnie.x-=2,a.bunnie.x<=0&&a.bunnie.setDirection("right")),a.bunnie.update(e),a.lastTime=t,window.requestAnimationFrame(a.loop)})),console.log("Initializing game..."),this.canvas=e,this.canvas.width=i,this.canvas.height=o;var s=this.canvas.getContext("2d");if(null===s)throw new Error("2D context not supported");this.context=s,this.context.imageSmoothingEnabled=!1,this.resourceLoader=new c,this.resourceLoader.load([n,r]).then((function(){a.spriteMap=new f(a.resourceLoader.get(n),4,4),a.tileMap=new f(a.resourceLoader.get(r),14,22),a.bunnie=new p({stand:new v({up:[a.spriteMap.get(2,0)],down:[a.spriteMap.get(3,0)],left:[a.spriteMap.get(0,0)],right:[a.spriteMap.get(1,0)]},1),walk:new v({up:[a.spriteMap.get(2,1),a.spriteMap.get(2,0)],down:[a.spriteMap.get(3,1),a.spriteMap.get(3,0)],left:[a.spriteMap.get(0,1),a.spriteMap.get(0,0)],right:[a.spriteMap.get(1,1),a.spriteMap.get(1,0)]},.5),push:new v({up:[a.spriteMap.get(2,3),a.spriteMap.get(2,2)],down:[a.spriteMap.get(3,3),a.spriteMap.get(3,2)],left:[a.spriteMap.get(0,3),a.spriteMap.get(0,2)],right:[a.spriteMap.get(1,3),a.spriteMap.get(1,2)]},.5)}),a.bunnie.setAction("walk"),a.bunnie.setDirection("left"),console.log("Starting game loop..."),a.lastTime=Date.now(),a.loop()}))}(w,512,448),document.body.appendChild(w)}]);